var errors=require("./errors"),logger=require("../../../../utils/logger").getLogger("collection");require("sugar"),module.exports=function(n){var t=function(){return[].slice.call(arguments).filter(function(n){return null!==n&&"undefined"!=typeof n}).join("/")},e=function(e){this.get=function(t){var r=e;return"function"!=typeof t&&(r+="/"+t),n({endpoint:r,method:"GET"})},this.getBy=function(t,r){var o=e,i="";return t&&(o+="/"+t.join("/")),r&&(Object.keys(r).forEach(function(n){i+="&"+n+"="+r[n]}),o+="?"+i.substring(1)),n({endpoint:o,method:"GET"})},this.create=function(r){var o=t(e);return n({endpoint:o,method:"POST",json:r})},this.createBy=function(t,r,o){var i=e,u="";return t&&(i+="/"+t.join("/")),r&&(Object.keys(r).forEach(function(n){u+="&"+n+"="+r[n]}),i+="?"+u.substring(1)),n({endpoint:i,method:"POST",json:o})},this.update=function(r,o){var i=t(e,r);return n({endpoint:i,method:"PUT",json:o})},this.updateBy=function(t,r,o){var i=e,u="";return t&&(i+="/"+t.join("/")),r&&(Object.keys(r).forEach(function(n){u+="&"+n+"="+r[n]}),i+="?"+u.substring(1)),n({endpoint:i,method:"PUT",json:o})},this["delete"]=function(r){var o={endpoint:t(e,r),method:"DELETE"};return n(o)},this.deleteBy=function(t,r){var o=e,i="";return t&&(o+="/"+t.join("/")),r&&(Object.keys(r).forEach(function(n){i+="&"+n+"="+r[n]}),o+="?"+i.substring(1)),n({endpoint:o,method:"DELETE"})}};this.create=function(n){return new e(n)}};